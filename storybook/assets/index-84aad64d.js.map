{"version":3,"file":"index-84aad64d.js","sources":["../../src/components/bar/index.ts"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\r\nimport { html, css, LitElement } from 'lit';\r\nimport { property, state, query } from 'lit/decorators.js';\r\n\r\nfunction clamp(value: number, min: number, max: number) {\r\n  return Math.min(max, Math.max(value, min));\r\n}\r\n\r\nexport default class Bar extends LitElement {\r\n  private _min = -1;\r\n  private _max = 1;\r\n\r\n  @property({ type: Number }) value = 0;\r\n  @property({ type: Number }) center = 0;\r\n  @state() dragging = false;\r\n\r\n  @property({ type: Number })\r\n  get min(): number {\r\n    return Math.min(this._min, this._max);\r\n  }\r\n\r\n  set min(value: number) {\r\n    const oldValue = this._min;\r\n    this._min = value;\r\n    this.requestUpdate('min', oldValue);\r\n  }\r\n\r\n  @property({ type: Number })\r\n  get max(): number {\r\n    return Math.max(this._min, this._max);\r\n  }\r\n\r\n  set max(value: number) {\r\n    const oldValue = this._max;\r\n    this._max = value;\r\n    this.requestUpdate('max', oldValue);\r\n  }\r\n\r\n  @query('[part=foreground]') foreground!: HTMLElement;\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: inline-block;\r\n      position: relative;\r\n      width: 300px;\r\n      height: 20px;\r\n      background: var(--frc-bar-background, #ddd);\r\n      color: var(--frc-bar-color, black);\r\n      font-size: 15px;\r\n      line-height: 18px;\r\n      text-align: center;\r\n    }\r\n\r\n    [part='dragger'] {\r\n      position: absolute;\r\n      top: 0;\r\n      height: 100%;\r\n      width: 100%;\r\n    }\r\n\r\n    [part='foreground'] {\r\n      position: absolute;\r\n      top: 0;\r\n      height: 100%;\r\n      background: var(--frc-bar-foreground, lightblue);\r\n      border-radius: 3px;\r\n      width: var(--foreground-width);\r\n      left: var(--foreground-left);\r\n      right: var(--foreground-right);\r\n      pointer-events: none;\r\n    }\r\n\r\n    .content {\r\n      position: relative;\r\n    }\r\n  `;\r\n\r\n  updateForeground() {\r\n    const { min, max, center, value, foreground } = this;\r\n    const val = clamp(value, min, max);\r\n\r\n    if (max < center) {\r\n      foreground.style.setProperty(\r\n        '--foreground-width',\r\n        `${(Math.abs(val - max) / (max - min)) * 100}%`\r\n      );\r\n      foreground.style.setProperty('--foreground-left', 'auto');\r\n      foreground.style.setProperty('--foreground-right', '0');\r\n    } else if (min > center) {\r\n      foreground.style.setProperty(\r\n        '--foreground-width',\r\n        `${(Math.abs(val - min) / (max - min)) * 100}%`\r\n      );\r\n      foreground.style.setProperty('--foreground-left', '0');\r\n      foreground.style.setProperty('--foreground-right', 'auto');\r\n    } else if (val > center) {\r\n      foreground.style.setProperty(\r\n        '--foreground-width',\r\n        `${(Math.abs(val - center) / (max - min)) * 100}%`\r\n      );\r\n      foreground.style.setProperty(\r\n        '--foreground-left',\r\n        `${(Math.abs(min - center) / (max - min)) * 100}%`\r\n      );\r\n      foreground.style.setProperty('--foreground-right', 'auto');\r\n    } else {\r\n      foreground.style.setProperty(\r\n        '--foreground-width',\r\n        `${(Math.abs(val - center) / (max - min)) * 100}%`\r\n      );\r\n      foreground.style.setProperty('--foreground-left', 'auto');\r\n      foreground.style.setProperty(\r\n        '--foreground-right',\r\n        `${(Math.abs(max - center) / (max - min)) * 100}%`\r\n      );\r\n    }\r\n  }\r\n\r\n  resized() {\r\n    this.updateForeground();\r\n  }\r\n\r\n  updated() {\r\n    this.updateForeground();\r\n  }\r\n\r\n  setDragPosition(ev: MouseEvent) {\r\n    const { left, width } = this.getBoundingClientRect();\r\n    const x = ev.clientX - left;\r\n    const dragPosition = clamp(x / width, 0, 1);\r\n    const value = this.min + (this.max - this.min) * dragPosition;\r\n\r\n    const event = new CustomEvent('barDrag', {\r\n      bubbles: true,\r\n      composed: true,\r\n      detail: { value },\r\n    });\r\n\r\n    this.dispatchEvent(event);\r\n  }\r\n\r\n  firstUpdated() {\r\n    this.setAttribute('draggable', 'false');\r\n\r\n    window.addEventListener('mousemove', (ev: MouseEvent) => {\r\n      if (!this.dragging) {\r\n        return;\r\n      }\r\n\r\n      this.setDragPosition(ev);\r\n    });\r\n\r\n    window.addEventListener('mouseup', () => {\r\n      this.dragging = false;\r\n    });\r\n  }\r\n\r\n  onMouseDown(ev: DragEvent) {\r\n    this.dragging = true;\r\n    this.setDragPosition(ev);\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <div part=\"foreground\" draggble=\"false\"></div>\r\n      <div class=\"content\" draggable=\"false\">\r\n        <slot></slot>\r\n      </div>\r\n      <div part=\"dragger\" @mousedown=\"${this.onMouseDown}\"></div>\r\n    `;\r\n  }\r\n}\r\n\r\nif (!customElements.get('frc-bar')) {\r\n  customElements.define('frc-bar', Bar);\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'frc-bar': Bar;\r\n  }\r\n}\r\n"],"names":["clamp","value","min","max","Bar","LitElement","oldValue","center","foreground","val","ev","left","width","x","dragPosition","event","html","css","__decorateClass","property","state","query"],"mappings":"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"}